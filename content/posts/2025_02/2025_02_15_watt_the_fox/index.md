+++
date = '2025-02-15T00:00:00'
months = '2025/02'
draft = false
title = 'ウェブサイトがCPUとバッテリーを浪費している理由とFirefox'
tags = ["テクノロジー", "ニュース", "FireFox"]
featureimage = 'thumbnails/orange2.jpg'
+++

> ウェブサイトがCPUとバッテリーを浪費している理由とFirefox

引用元：[https://news.ycombinator.com/item?id=43062546](https://news.ycombinator.com/item?id=43062546)

{{<matomeQuote body="計画は進んでるし大事なことだから、早く修正したいと思ってるんだ。ただ、音声のコンテキストを一時停止するのは簡単じゃなくて、かなり複雑なんだよね。でも、他の人たちがやってるから、必ず解決するよ。" userName="padenot" createdAt="2025-02-15T22:31:56" color="#ff33a1">}}

{{<matomeQuote body="批判を個人的に受け取らないでね。最近、批判をフラストレーションと感じたオープンソースのメンテナが騒ぎを起こしたから。多くの人が言いたいことは分かってるから、時間が限られてる中でやってるってことを知っておいて。Firefoxの開発者たちがユーザーのために一生懸命やってるのを知ってるよ。" userName="zoogeny" createdAt="2025-02-16T00:07:48" color="#ff5c5c">}}

{{<matomeQuote body="長年のFirefoxユーザーで、変えるつもりはないよ。開発のことは分かるけど、今回は優先順位の問題だと思う。もっと良くなる可能性があるけど、それには時間と労力が必要。Mozillaはいろんなことに手を出してるけど、Firefoxは最も重要なものだと思うから、開発者にはチャンスを与えて欲しい。" userName="godelski" createdAt="2025-02-16T20:16:10" color="">}}

{{<matomeQuote body="ハードワークに感謝！Firefoxは本当に大事だと思ってる。" userName="JohnBooty" createdAt="2025-02-16T00:00:02" color="">}}

{{<matomeQuote body="Firefoxユーザーから感謝の気持ち！それと、OPはもう分かってるかもしれないけど、”完璧じゃないけど、十分良い”って感じ。" userName="darkwater" createdAt="2025-02-16T09:09:50" color="">}}

{{<matomeQuote body="ローカルで問題をデバッグすることで、Firefoxをもっと使えるようになりたい。どこから始めればいい？" userName="noah_buddy" createdAt="2025-02-16T02:00:08" color="">}}

{{<matomeQuote body="開発ドキュメントのインデックスがここにあるよ。デバッグに関する記事へのリンクもあるから、参考にしてみてね：<br>https://firefox-source-docs.mozilla.org/" userName="buovjaga" createdAt="2025-02-16T08:06:08" color="">}}

{{<matomeQuote body="ありがとう！" userName="noah_buddy" createdAt="2025-02-16T20:20:50" color="">}}

{{<matomeQuote body="文句を言う人の数十倍の人が、毎日Firefoxを愛用してるってことを知ってほしい！開発者たちが、クリックベイト的な記事から有益な内容を抽出できるよう願ってる。" userName="EasyMark" createdAt="2025-02-16T21:14:49" color="">}}

{{<matomeQuote body="このことについての言葉やエネルギーに感謝！" userName="patcon" createdAt="2025-02-15T22:46:45" color="">}}

{{<matomeQuote body="この件についての努力に感謝！”サイレンス時にサスペンド”以上の複雑さについての話を聞きたい人も多いはずだよ。リンクがあれば教えてほしい。" userName="JoshTriplett" createdAt="2025-02-16T11:07:47" color="">}}

{{<matomeQuote body="Bluetoothのレコードプレーヤーについてなんだけど、45回転を理解してないんだ。メーカーはアダプターを入れたのに。静かな部分でBluetoothが切れることもあって、”サイレンス”と”スリープ”の定義はどうなるの？" userName="genewitch" createdAt="2025-02-16T11:17:33" color="">}}

{{<matomeQuote body="なんでBluetooth付きのレコードプレーヤー持ってるんだろう。アナログ媒体のコンセプトに反してるんじゃない？" userName="2big2fail_47" createdAt="2025-02-16T22:10:25" color="">}}

{{<matomeQuote body="Firefoxユーザーからの大きな感謝！" userName="rambambram" createdAt="2025-02-16T12:32:51" color="">}}

{{<matomeQuote body="＞”すぐに直せるといいんだけど、長い間待たせてごめん。”<br>バグズリラの現状を二文で説明すると、こんな感じだね :P" userName="moffkalast" createdAt="2025-02-16T19:03:34" color="">}}

{{<matomeQuote body="Firefoxの開発にみんなが頑張ってるのほんと感謝！ありがと！" userName="Centigonal" createdAt="2025-02-16T01:46:00" color="">}}

{{<matomeQuote body="こういう問題が優先順位を上げてくれたらいいな。バッテリーを奪ったり変な動作が多いと、ユーザーはソフトウェアを使うのをやめちゃうからね。Firefoxが relevancyを維持・向上することが大事だと思う。ChromiumやBlinkに対抗するのはすごく難しいと思う。" userName="h14h" createdAt="2025-02-16T02:11:13" color="#45d325">}}

{{<matomeQuote body="ありがとう！あなたの努力でウェブがオープンに保たれてる。" userName="lknuth" createdAt="2025-02-16T00:33:30" color="#ff33a1">}}

{{<matomeQuote body="努力と進捗状況を共有してくれてありがとう。バグズリラで進捗を追えるリンクはあるの？" userName="pentagrama" createdAt="2025-02-16T00:06:31" color="">}}

{{<matomeQuote body="Linuxで変な音声の問題があってスピーカーのポップ音が出たり、新しいタブを開くと他のタブの音が永久に歪んで静的になることがある。これは不満ではなくて、ブラウザかオーディオシステムの問題なのかなってずっと思ってた。" userName="Glyptodon" createdAt="2025-02-16T04:34:34" color="">}}

{{< details summary="もっとコメントを表示（1）">}}
{{<matomeQuote body="この問題が発生した時、speech-dispatcherを無効にして消したら直った。音声合成のせいみたいで、使わないけど必要な人には面倒かも。" userName="kruffin" createdAt="2025-02-16T18:36:02" color="">}}

{{<matomeQuote body="ビデオ通話でこのフィードバックが来てる。ハイバーネーションやマイクの入力レベルが120％にリセットされることと関係があるのかなと思ってた。" userName="pacifika" createdAt="2025-02-16T14:47:27" color="">}}

{{<matomeQuote body="ありがとう！この記事には、なぜ無音の代わりにホワイトノイズが再生されるのかが書かれてない。" userName="zX41ZdbW" createdAt="2025-02-15T23:42:18" color="">}}

{{<matomeQuote body="もしかしたら、何も再生されていないのかも。オーディオセッションを開くとDAC/アンプが起動してアナログのノイズフロアが聞こえるのかも。それによって再生中のノイズは常に存在していて、無音の時に気づくことが多いのかも。コンピュータはオーディオには厳しい環境だし、外部オーディオインターフェースを使う方がいいかも。" userName="jsheard" createdAt="2025-02-15T23:49:01" color="#45d325">}}

{{<matomeQuote body="OPの問題はDiscordのウェブアプリが最悪な存在で数年前から知ってた。俺のシステムだと音が低電力状態になって、何かが復帰する時にポップ音が鳴るんだ。タブをミュートにして通知もオフにしても、時々発生してた。他のサイトも同じ問題があったけど、頻度は少なかった。結局、低電力状態を自動的に無効にして、バッテリーはちょっと使うことになったよ。" userName="joecool1029" createdAt="2025-02-16T04:24:04" color="">}}

{{<matomeQuote body="＞コンピュータはオーディオにとって本当に厳しい環境なんだ<br>昔は音が出るのが普通だったから、著者は今はマシだと思った方がいい。音源を使ってるPCは特にそうだね。あの頃のことを思い出すと、2000ドルのコンピュータを200ドルのステレオに変えるって話があった気がする。" userName="II2II" createdAt="2025-02-16T01:15:21" color="#ff33a1">}}

{{<matomeQuote body="携帯電話が近くにあったら、スピーカーからRFIが聞こえたのを忘れちゃダメだよ！電話が鳴る直前にノイズが聞こえるんだ！" userName="tonyarkles" createdAt="2025-02-16T03:32:14" color="">}}

{{<matomeQuote body="いくつかの素敵な電子音楽に使われてた！<br>Dual Band – GSM (1998): https://www.youtube.com/watch?v=ntKOJdht3t8<br>Mav – HGP (2005): https://www.youtube.com/watch?v=ZacenNeu4fw<br>Tatarola – Who Is Calling (2007): https://www.youtube.com/watch?v=hTOyaG7VYKw" userName="ltrls23" createdAt="2025-02-16T12:46:18" color="">}}

{{<matomeQuote body="スピーカーが電源入ってる時、実際のラジオ放送も聞こえたことがあったな。マジで狂気だよ！" userName="andrecarini" createdAt="2025-02-16T04:49:17" color="">}}

{{<matomeQuote body="この技術には驚かされる。ラジオはシンプルだけど広く存在する技術で、ラジオ用じゃないものでも信号をキャッチして再生しちゃう。なくならないことを願ってる。" userName="cafeinux" createdAt="2025-02-16T08:11:01" color="">}}

{{<matomeQuote body="子供の頃、強力なAM放送の660KHZから6km以内で生活してたんだ。幸運にもストーブの煙突と家のアルミ裏の断熱材のおかげで、周波数で共鳴する受信機ができてた。感電もあったし、音が常に流れてて普通だと思ってた。電子工学に興味を持つきっかけになった。" userName="K0balt" createdAt="2025-02-16T12:13:21" color="#ff33a1">}}

{{<matomeQuote body="＞外部の電話が届かないリスナー向けのバス中継メッセージって興味深いね！<br>それってどんなメッセージだったの？" userName="lxgr" createdAt="2025-02-16T14:22:20" color="#ff5c5c">}}

{{<matomeQuote body="川の上流に行くっていうメッセージや、誰かが亡くなったとか、葬式のこととか、町に誰かが来てるとか。" userName="K0balt" createdAt="2025-02-16T19:46:51" color="">}}

{{<matomeQuote body="素晴らしい話、シェアしてくれてありがとう！" userName="andrecarini" createdAt="2025-02-18T03:16:39" color="">}}

{{<matomeQuote body="＞電話が鳴る直前にノイズが聞こえたってこと、あんまり考えたことなかったけど、実際に経験してたら信じられないと感じる。" userName="Semaphor" createdAt="2025-02-16T08:30:59" color="">}}

{{<matomeQuote body="それは偶然だけどすごく役立つ機能だった！" userName="TeMPOraL" createdAt="2025-02-16T08:53:33" color="">}}

{{<matomeQuote body="システムの状態をバスの活動音から推測できることもあったよね！" userName="myself248" createdAt="2025-02-16T13:57:42" color="">}}

{{<matomeQuote body="CRT時代は、ウェブサイトをスクロールするたびにスピーカーから音が出てたのは笑った。" userName="Asooka" createdAt="2025-02-16T16:59:28" color="">}}

{{<matomeQuote body="それ聞けてよかった！高優先度のバグとして扱うべきだね。Firefoxの開発ありがとう！" userName="h43z" createdAt="2025-02-16T14:18:16" color="#38d3d3">}}

{{<matomeQuote body="Firefoxの開発、ほんと感謝！" userName="4ndrewl" createdAt="2025-02-16T08:20:28" color="">}}


{{< /details >}}
{{< details summary="もっとコメントを表示（2）">}}
{{<matomeQuote body="音を鳴らさずにオーディオコンテキストを開くのはボット検出の手段かも。異なるブラウザエンジンやOSでは音声処理が異なるから、無音の音を再生して記録すると特徴が出るんだ。" userName="mike_d" createdAt="2025-02-15T22:13:40" color="#ff5733">}}

{{<matomeQuote body="ブラウザやウェブの標準化の人たち、API作りすぎて悪用されること考えないで進めてる気がする。" userName="zie" createdAt="2025-02-16T03:00:45" color="">}}

{{<matomeQuote body="考えたんだろうけど、フィンガープリンティングって簡単すぎるし、根本から始めても止めるの難しいよね。" userName="IshKebab" createdAt="2025-02-16T07:58:43" color="">}}

{{<matomeQuote body="俺は少数派かもしれないけど、99.99%のサイトに音を出させたくない。残りのサイトでも音なしで過ごせるよ。" userName="account42" createdAt="2025-02-17T12:43:14" color="">}}

{{<matomeQuote body="このAPIを作った企業を見れば、彼らがどう悪用できるか考えたのは明らかだ。" userName="account42" createdAt="2025-02-17T12:41:26" color="">}}

{{<matomeQuote body="ボットを騙すためにオーディオコンテキストをシミュレートするプラグインも出回ってるらしい。驚きだ。" userName="x0054" createdAt="2025-02-16T00:23:33" color="#ff5733">}}

{{<matomeQuote body="Cloudflareがこれを実装して、俺のブラウジングの自由をさらに奪うのが待ち遠しい。CPUサイクルも無駄にしそうだ。" userName="czk" createdAt="2025-02-15T23:09:00" color="">}}

{{<matomeQuote body="彼らのボットチェックが、すでにそういうことをやっている可能性もあるよね。Web Audioは昔からあるし。" userName="jsheard" createdAt="2025-02-15T23:19:28" color="">}}

{{<matomeQuote body="ほんと、このホワイトノイズに悩まされてたけど、原因を探せなかったんだよね。タブに”再生中”のアイコンが出なくて、タブをミュートしても音は止まらないし、Windowsの音量ミキサーでFirefoxをミュートしてもダメだった。デスクトップユーザーにはこのアドオンあまり良くないかも。ホワイトノイズが頻繁に始まったり止まったりするのが余計にうざい。" userName="pianom4n" createdAt="2025-02-15T22:15:21" color="">}}

{{<matomeQuote body="＞ 大音量ミキサーでFirefoxをミュートしてもダメなんて言ってるけど、これはFirefoxのバグってこと？" userName="sneak" createdAt="2025-02-16T00:54:14" color="">}}

{{<matomeQuote body="必ずしも。現代のWindowsではアプリとは別に新しいミキサー／メディアソースを作れるから、アプリの音と別のメディア音を持てるよ。" userName="ComputerGuru" createdAt="2025-02-16T04:49:37" color="">}}

{{<matomeQuote body="自分はデスクトップで拡張機能を使って問題なかった。どんなサイトを訪れるかによるんじゃないかな。頻繁に音が出るサイトには拡張機能をオフにしたほうがいいかも。" userName="h43z" createdAt="2025-02-16T14:20:58" color="">}}

{{<matomeQuote body="出力がアイドル状態になると、デジタルSPDIF信号が同期を失う。再同期はプレイバックが始まった時に即時じゃなくて、最初の1秒くらい音が失われるんだ。データをラインに送り出さず出力を常にオープンに保つプログラムを書いたけど、ノートPCに関してはエネルギー節約が重要だよね。" userName="cosmotic" createdAt="2025-02-15T22:30:11" color="#ff33a1">}}

{{<matomeQuote body="MacbookのFiiO K3 DACでほんとイライラした。システム音が遅延するせいで鳴らないことが多かった。Windowsのドライバにはストリームを常にオンにするオプションがあるけど、MacOSにもあればいいのに…。" userName="russelg" createdAt="2025-02-16T03:02:28" color="">}}

{{<matomeQuote body="同じように自分もUSB DAC用にちょっとした工夫をしてて、ログイン時に`play -qn &`を始めるだけだった。" userName="PeakKS" createdAt="2025-02-16T01:41:42" color="">}}

{{<matomeQuote body="自分の解決策よりずっと優雅な方法だね。" userName="cosmotic" createdAt="2025-02-16T18:00:10" color="">}}

{{<matomeQuote body="あ！これでAndroidのFirefoxで発生した問題が説明できるかも。時々、電話が突然10GB/日もデータを使って困ってたんだ。ニュースサイトが音声を流して新しい広告をリピートしていたせいで、タブがスリープ状態にならなかったんだ。繰り返し請求が馬鹿らしくなってChromeに切り替えた。" userName="brilee" createdAt="2025-02-16T16:51:22" color="#ff5c5c">}}

{{<matomeQuote body="自分も似たような現象に気付いてたけど、サイトが本当にオーディオコンテキストを開いているのか、それともFirefox内部の問題なのかはわからない。YouTubeやWeb Audio APIを使ってないサイトでも起こるから。バッテリーの持ちがめちゃくちゃ悪くなって、Firefoxを捨てたくはないけど、他のブラウザに切り替えようと思ってる。" userName="lxgr" createdAt="2025-02-16T14:06:23" color="#ff5c5c">}}

{{<matomeQuote body="Chromiumのコードはここにある：<br><br>https://source.chromium.org/chromium/chromium/src/+/main:med...<br>サイレンスを30秒ぐらい検出すると、OSオーディオデバイスによるシンクから無効なシンクに切り替わるみたい。音声デバイスとは異なるクロックを使用しているから、最後にそのコンテキストが使われると特定の音調で歪むことがあるって報告もある。記事に載ってるサスペンド・リジュームAPIを使うのが回避策だよ。" userName="DaleCurtis" createdAt="2025-02-16T18:44:07" color="">}}

{{<matomeQuote body="audioContextの実装の詳細は分からないけど、ちょっと賢くてダイナミックにできてると思う。通知音を鳴らすのが、D3でSVGを描くより複雑な気がする。もっと効率的なAPIで通知ハンドラーを登録するサービスワーカーのフックがあればいいな。" userName="Already__Taken" createdAt="2025-02-16T12:03:33" color="">}}


{{< /details >}}
{{< details summary="もっとコメントを表示（3）">}}
{{<matomeQuote body="音が聞こえるべきなん？MacOSのFirefox 134.0.1だけど、音が全然聞こえない。" userName="martin_a" createdAt="2025-02-15T22:05:53" color="">}}

{{<matomeQuote body="音は聞こえないけど、著者のデモページの音再生ボタンをクリックしたら、消費電力が約１増えた。" userName="kkarpkkarp" createdAt="2025-02-15T23:02:33" color="">}}

{{<matomeQuote body="FirefoxのAndroid版で、ほんの少しホワイトノイズが聞こえる！" userName="TrianguloY" createdAt="2025-02-15T22:07:53" color="">}}

{{<matomeQuote body="ありがと！これでhttps://www.dr.dk/のフロントページが直った。" userName="kseistrup" createdAt="2025-02-16T19:13:04" color="">}}

{{<matomeQuote body="休止中のAudioContextが白いノイズを出してる理由ってなんなん？" userName="Traubenfuchs" createdAt="2025-02-16T08:40:52" color="">}}

{{<matomeQuote body="AudioContext自体がホワイトノイズの原因じゃないよ。音声DACが電源オンになることによって、自身がノイズを出すかもしれない。" userName="spiffyk" createdAt="2025-02-16T09:07:09" color="">}}

{{<matomeQuote body="ブラウザやOSのサウンドサーバーが、“サイレンス”と“何も再生されていない”を区別できるのか、ずっと気になってた。Bluetoothのオーディオデバイスに関わる重要な差なんだけど、APIはどうなの？" userName="lxgr" createdAt="2025-02-16T14:57:00" color="">}}

{{<matomeQuote body="一般的には、サイレンスと何も再生していないのは違う。オーディオソースを作成して、下の層がバッファを渡してくるパターンもある。アプリと物理音声の間にはたくさんの層があって、その分電力を消費する。" userName="Sidnicious" createdAt="2025-02-16T18:08:26" color="#ff5733">}}

{{<matomeQuote body="確かに、検出することは可能で、必要な場合は下の層がそうしてる。Firefoxが“音声再生中”的なタブインジケーターを追加したとき、初めはサイレンスでも表示されてたけど、その後静かな部分はインジケーターが消えるようになった。" userName="spiffyk" createdAt="2025-02-18T11:07:08" color="">}}

{{<matomeQuote body="同じ問題がAndroidデバイスでも起こるんだろうか。" userName="Jotalea" createdAt="2025-02-17T00:25:26" color="">}}

{{<matomeQuote body="“ウェブサイトが微かに聞こえる音で人の心を操る”っていう陰謀論が想像できる。" userName="NooneAtAll3" createdAt="2025-02-16T09:59:20" color="">}}

{{<matomeQuote body="抽象化層は難しいしバグもある。抽象化層を減らす方法を考えた方がいい。仮想マシンで動かすんじゃなくて、直接機械語にコンパイルすればもっと効率が良くなるかも。" userName="immibis" createdAt="2025-02-16T13:53:12" color="">}}

{{<matomeQuote body="これは機械言語とVMの話じゃないね。確かに抽象化レイヤーは存在するけど、理由はしっかりしてるよ。例えば、全てのブラウザタブがサウンドハードウェアに対して排他的にアクセスするのは、音量調整なんかも含まれるからマズいんだ。これじゃ複数のアプリやタブから音を混ぜることもできないから、これは必須だよね。" userName="lxgr" createdAt="2025-02-16T14:59:22" color="#ff33a1">}}


{{< /details >}}


[記事一覧へ]({{% ref "/posts/" %}})
