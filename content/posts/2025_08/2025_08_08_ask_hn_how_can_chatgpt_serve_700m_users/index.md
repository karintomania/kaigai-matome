+++
date = '2025-08-08T00:00:00'
months = '2025/08'
draft = false
title = '週7億人対応のChatGPT、なぜ俺はGPT-4すらローカルで動かせないのか？'
tags = ["AI", "LLM", "スケーリング", "インフラ", "最適化"]
featureimage = 'thumbnails/light_colour1.jpg'
+++

> 週7億人対応のChatGPT、なぜ俺はGPT-4すらローカルで動かせないのか？

引用元：[https://news.ycombinator.com/item?id=44840728](https://news.ycombinator.com/item?id=44840728)




{{<matomeQuote body="SamがChatGPTは週7億人のユーザーをさばくって言ってたけど、俺はGPT-4クラスのモデルをローカルで動かすのすら無理なんだよね。VRAMか速度が問題でさ。大規模なシステムで低遅延を維持するエンジニアリングの裏技って何？MLシステム作ったことある人からの意見が聞きたいな。" userName="superasn" createdAt="2025/08/08 19:27:28" color="#785bff">}}




{{<matomeQuote body="俺はGoogleで毎日こういうシステムに関わってるけど（個人的な意見ね）、詳しいことはあんまり言えないんだ。でも、俺の同僚が書いたこの資料は共有できるよ！<br>アクセラレーターのアーキテクチャとか、高速化の考慮事項について詳しくわかるはず。特に推論に関する質問は、この章を見てみて。<br>https://jax-ml.github.io/scaling-book/inference/<br>Unslothのガイドも超おすすめ。モデルの最適化についてめちゃくちゃ詳しい人たちだから。Gemma 3nのガイドも読んでみて。<br>https://docs.unsloth.ai/basics/gemma-3n-how-to-run-and-fine-..." userName="canyon289" createdAt="2025/08/08 19:47:42" color="#ff33a1">}}




{{<matomeQuote body="GoogleってTPU持ってるから、NVIDIAのカードを借りるより自社モデルの推論がずっと儲かるんじゃないの？OpenAIはMicrosoftとの提携でGPUを調達してるの？リンクどうもね、面白い本だ！" userName="tough" createdAt="2025/08/08 20:01:03" color="">}}




{{<matomeQuote body="うん。GoogleがLLMのゲームで勝つだろうね。NVIDIAのカードよりすごくエネルギー効率が良いTPUで、圧倒的にリードしてるからさ。" userName="ActorNightly" createdAt="2025/08/08 20:12:39" color="">}}




{{<matomeQuote body="解決する必要すらない問題に、たくさんの頭の良い人たちが取り組んでるってのは、市場配分の面白い側面だよね。" userName="catigula" createdAt="2025/08/08 23:37:47" color="">}}




{{<matomeQuote body="「解決する必要がない」ってどういう意味？金融とかフラッシュトレードの方がよっぽどそうじゃない？<br>多くの人がすごく役立つって思ってるシステムをスケールさせるのは、ビジネス的にも、市民目線でも、解決すべき問題に見えるけどね。" userName="YossarianFrPrez" createdAt="2025/08/08 23:47:27" color="#ff33a1">}}




{{<matomeQuote body="Googleを止められるのはGoogleだけだよ。<br>最高のモデルは作るだろうけど、製品化や、既存製品への統合でやらかす可能性はあるよね。" userName="baxtr" createdAt="2025/08/08 21:47:42" color="">}}




{{<matomeQuote body="GCPでTPUを使いたい企業をGoogleがダメにするってのは、ある意味才能いるよね。でも、彼らが製品を捨てたり、顧客サービスがイマイチだったり、大企業への態度が傲慢だったりするから、MicrosoftやAWSに足元をすくわれるんだ。<br>俺がAWS ProServeにいた時、GCPと競合する時は、彼らがサービスを放棄するって点を指摘するだけでよかったよ。FUDだった部分もあるだろうけど、うまくいったね。" userName="scarface_74" createdAt="2025/08/08 22:12:00" color="#ff33a1">}}




{{<matomeQuote body="週7億人のユーザーが本当に生産的？AIが聖杯ならもっと改善されてるはず。Tesla FSDやAGIと同じで、口ばかり。GPT-5試したが幻覚多くて時間の無駄だった。結局自分でドキュメント読んだ。<br>LLMはSocial Mediaと同じ道を行くと思う。週7億人ユーザーってことは、また「俺たちが製品」なんだよ。本当に労働者を置き換えられるなら、月20ドルで使えないはず。生産的利用は10%未満じゃないかな。" userName="windexh8er" createdAt="2025/08/09 00:53:27" color="#38d3d3">}}




{{<matomeQuote body="みんな賢いって言うけど、実際は昔のメインフレームみたいなタイムシェアリングで動かしてるだけじゃん？そんな大したことないだろって皮肉だよ。" userName="blibble" createdAt="2025/08/08 23:10:34" color="">}}




{{<matomeQuote body="正直、GoogleはTPUと最新モデルを組み合わせたソリューションを企業に売れば、エンタープライズ市場を独占できるはずだろ。GCPも規制のあるクライアントにはそうしてるみたいだしね。" userName="fakedang" createdAt="2025/08/08 21:13:54" color="#ff5733">}}




{{<matomeQuote body="推論はほとんどステートレスだから、トレーニングみたいにマシン全体でメモリを整合させる必要はないんだ。単純に大量のデータをデカいマシンに振り分けるだけ。秘密は莫大なカネと、モデルをハードの箱に収めること、それが一番難しいんだよね。" userName="KaiserPro" createdAt="2025/08/08 21:50:29" color="#785bff">}}




{{<matomeQuote body="Googleの主軸は広告だから、データが最も価値があるんだ。だからAIも社内で囲い込みたい。たぶん彼らの狙いはスマホ向けAIだろうね。Gemma QATモデルって3090でLlamma 3並みの性能が出るのに、あまり話題にならないのは不思議だよ。" userName="ActorNightly" createdAt="2025/08/08 21:53:16" color="#ff5c5c">}}




{{<matomeQuote body="週7億人ユーザーって本当なら、その利用がどれだけ生産的でコストに見合ってるかって疑問だよな。価値って誰が決めるんだ？俺の仕事のほとんどはChatGPTじゃ無理だけど、面倒な作業は減らしてくれるのは確かだよ。" userName="mlyle" createdAt="2025/08/09 03:45:04" color="#785bff">}}




{{<matomeQuote body="Googleのエンジニアがそんなに優秀なら、なんでgoogle.comはLighthouseスコア100％にできないんだ？って思うんだけど。" userName="LAC-Tech" createdAt="2025/08/09 01:28:55" color="">}}




{{<matomeQuote body="LLMは非効率で、水も電力もバカ食いする。スーパーコンピュータでジョーク作らせるんじゃなくて、命に関わる研究に使えよ。5年前はこんなの無かったのに、なんで面倒な作業をAIに任せて、同時に「AIは使えない」って言うの？矛盾してるだろ。ポール・グレアムのTwitterで見た、12時間で1万行コード書く「ホットショット」の話も信じられないわ。<br>[0] https://www.sciencenews.org/article/ai-energy-carbon-emissio...<br>[1] https://x.com/paulg/status/1953289830982664236" userName="windexh8er" createdAt="2025/08/09 13:45:03" color="#ff33a1">}}




{{<matomeQuote body="俺がAIに任せるのは自動化できないようなタスクなんだよ。「軌道モデルのツール作って」とか「大学形式に変換して」とか。人間のアシスタントもコストかかるしね。AIで仕事の20-30%は減らせるし、俺より上手くやってくれることさえある。おかげで俺は30-40%多くの仕事をこなして、より価値の高いことに集中できるようになったんだ。AIは俺には無理なイラスト制作とかも手伝ってくれるし、俺の能力を超えてくるよ。" userName="mlyle" createdAt="2025/08/09 17:11:16" color="#ff5733">}}




{{<matomeQuote body="それは間違いだよ。KVキャッシュには色々なトリックがあって、ユーザーが違ってもシステムプロンプトを共有すれば最初の部分は同じになるし、入力や出力が一緒なら全体をキャッシュできる。知っておくべきことだけど、あなたの認識は全然違うよ。" userName="brookst" createdAt="2025/08/09 05:01:29" color="#45d325">}}




{{<matomeQuote body="GoogleがTPU関連のプロジェクトを放棄するわけないだろ。何十億ドルもインフラに投資してるんだから。彼らの製品放棄の評判があるって言うけど、これに関してはゼロだよ。" userName="rlupi" createdAt="2025/08/09 10:21:09" color="">}}




{{<matomeQuote body="LLMが使う電力って人間が使う量と比べ物にならないくらい多いし、経済的に長期的には意味ないって。コマンドツールに詩を作る能力なんていらないだろ？滅多に使わない汎用性のために金払いすぎだよ。電力消費が減るか、利用料が上がるか、システムが崩壊するかのどれかだよ。" userName="Mentlo" createdAt="2025/08/11 02:25:35" color="#38d3d3">}}




{{<matomeQuote body="大規模バッチ推論がキーだね。並列化とシャーディングを最大化すれば、モデルのパラメータとそれに関連するメモリ帯域幅は実質無料になるんだ。必要なのはリクエストごとの計算とアクティベーションのメモリだけ。MoEモデルは特にこれで効率的になってる。ローカルでこれに太刀打ちするのは無理だろ。" userName="zozbot234" createdAt="2025/08/09 05:10:58" color="#ff5c5c">}}




{{<matomeQuote body="頭いい人でも万能じゃないって話。俺の元ボスは大学の研究所を立ち上げたけど、雇った教授陣は変人ばかりで苦労してたらしい。別の同僚は専門分野では天才だけど、買い物とか税金とか日常のことは全然ダメだったって。" userName="usr1106" createdAt="2025/08/09 06:54:39" color="">}}




{{<matomeQuote body="でもASICって、大きなアーキテクチャ変更があったら大変なんじゃないの？" userName="davedx" createdAt="2025/08/08 22:11:48" color="">}}




{{<matomeQuote body="GoogleがLLMゲーム勝つって言われてるけど、計算力だけで決まるわけじゃないだろ。俺はAnthropicと中国がリードしてると思う。ベンチマークなんてアテになんねぇよ。Opus 4とかQwen 3の品質が高いのは、専門家による高品質なラベリングがカギだろね。" userName="benreesman" createdAt="2025/08/09 07:11:49" color="#ff5733">}}




{{<matomeQuote body="Googleが企業にGeminiのセルフホスティングを許可し始めたってさ。NVIDIA Blackwell GPUでも使えるって。俺的にはTPUとセットで提供した方が、大規模インフラ持ってない企業には良いと思うけどな。<br>https://www.cnbc.com/2025/04/09/google-will-let-companies-ru…" userName="fakedang" createdAt="2025/08/08 22:02:42" color="">}}




{{<matomeQuote body="現代の飢餓は政府の機能不全とか武力紛争が原因で、エンジニアには関係ないだろ。「世界に悪いことがあるから他のことすんな」みたいな考え方は間違ってるって。" userName="seneca" createdAt="2025/08/09 01:04:10" color="">}}




{{<matomeQuote body="システムが同じ質問を認識して同じ答えを出すって？そんな状況、めちゃくちゃ珍しいだろ。誰が全く同じコンテキストを共有するんだよ。最適化としては全然意味ないんじゃね？" userName="kossTKR" createdAt="2025/08/10 15:59:46" color="">}}




{{<matomeQuote body="人間が1時間タスクするのに食べ物で350kJは使うし、これLLMの100〜200リクエスト分に相当するらしいぞ。MoEモデルなら詩を作るためのパラメータは使われないから、汎用性が無駄ってわけじゃないんだ。LLMの有用性は上がるし、コストも効率も上がる、この両方だろね。" userName="mlyle" createdAt="2025/08/11 03:35:08" color="#ff5733">}}




{{<matomeQuote body="飢餓の問題は、政治的な意思とか共感、リーダーシップの問題だよ。エンジニアリングの問題じゃないって。" userName="AdieuToLogic" createdAt="2025/08/09 00:58:54" color="">}}




{{<matomeQuote body="超優秀な専門家もいるけど、俺の経験ではもっと広い知識を持つ人も多いよ。<br>本当の理由は社内の政治とか優先順位だろうな。Googleには技術力がある奴らもいるけど、気にしてるのか？気にしてても、そいつらをそのタスクに割り当てられるのか？って話だ。" userName="jeltz" createdAt="2025/08/09 10:34:54" color="#45d325">}}




{{< details summary="もっとコメントを表示（1）">}}

{{<matomeQuote body="H100は2万ドルのカードでVRAMが80GB。10万ドルのカードを積んだ2Uラックサーバー、ラック全体だと100万ドルにもなるんだ。運用費やエンジニアは別だけどな。<br>AIバブルが弾けたら、ローカルモデルを動かせるようになるかも。10年後には10万ドルのサーバーがeBayで3千ドルに。電気屋がガレージに240Vのコネクタを付けるようになるだろうな。" userName="airhangerf15" createdAt="2025/08/08 19:50:51" color="#45d325">}}




{{<matomeQuote body="10年って何言ってんだ？今すぐeBayでDGX-1が1万ドル以下で手に入るぞ。<br>VRAMが256GB（HBM2だぜ）、NVLink対応、RAM512GB、CPU40コア、SSD8TB、100GbitのHBAも付いてる。<br>非Nvidia製なら約6千ドルだ。<br>重くて信じられないぐらいうるさいし、1台で240Vの16A回路をほぼ使い切る。つまり13000BTU＼hrの排熱が出るってことだ。" userName="semi-extrinsic" createdAt="2025/08/08 20:20:46" color="#45d325">}}




{{<matomeQuote body="AIバブルが弾けなくても、10年後にサーバーがeBayに出回るっていう君の予測は多分当たるよ。<br>だって一部のデータセンターはハードウェアをアップグレードして、古い奴を第三者に転売するだけだからな。" userName="invaliduser" createdAt="2025/08/08 20:05:22" color="#ff33a1">}}




{{<matomeQuote body="AIに関するある人の見解は、データセンターへの何十億もの投資が10年後には全く価値がなくなるってものだった。<br>鉄道や電話線と違い、この投資は寿命が短い。<br>今のデータセンター投資は無駄で莫大な損失になると言ってた。<br>AGIを発明して間違いだと証明されるかもだけど、最後は全部ゴミになるんじゃないかな。" userName="mattmanser" createdAt="2025/08/08 21:21:57" color="#45d325">}}




{{<matomeQuote body="冬にだけ動かせば排熱じゃないよ。" userName="ksherlock" createdAt="2025/08/08 21:42:00" color="">}}




{{<matomeQuote body="ガス炉とかヒートポンプの方が抵抗負荷より効率的って事実を無視するならな。" userName="hdgvhicv" createdAt="2025/08/08 22:24:44" color="">}}




{{<matomeQuote body="240V 20A 2Pブレーカーが2個必要になるよ。サーバー用に1個、1トンのミニスプリットで排熱用に1個ね ;)" userName="quickthrowman" createdAt="2025/08/08 21:11:59" color="#ff33a1">}}




{{<matomeQuote body="分かりやすい単位だと3.8kWだよ。" userName="eulgro" createdAt="2025/08/08 22:06:01" color="">}}




{{<matomeQuote body="ヒートポンプは分かるけど、ガス炉が家の中で抵抗負荷より効率良いってどういうこと？単にガスが安くて経済的って意味？それとも本当に効率がいいって話なの？疑問を呈してるね。" userName="tgma" createdAt="2025/08/08 22:36:48" color="#ff5733">}}




{{<matomeQuote body="ACを合わせるなら必要な電力は1/4で済むんじゃないかな？もし既に熱を取り除く方法がない場合の話だけどね。効率アップの可能性を指摘してるよ。" userName="Dylan16807" createdAt="2025/08/08 21:22:52" color="">}}




{{<matomeQuote body="冷房のBTUはCOP考慮済み。空冷で最大COP4だけど、冷却塔で7まで上がる。230V12kBTUミニスプリットのスペックだと、エアハンドラ3A、凝縮器12Aで計15A。最低回路電流の計算だと20Aブレーカーが必要。実際は凝縮器9.5-10A、エアハンドラ2.4Aくらい。12kBTU除去には5-6Aくらいで、16Aサーバーの約1/3でCOPは3くらいになるって詳しい分析だね。" userName="quickthrowman" createdAt="2025/08/08 21:34:23" color="#785bff">}}




{{<matomeQuote body="電力がどこから来るかによる話だね。もし化石燃料で発電してるなら効率は40%くらいしかないから、同じ熱を家に入れるのに2.5倍の燃料を燃やすことになるって。発電効率を考慮した賢い指摘だね。" userName="meatmanek" createdAt="2025/08/08 23:07:06" color="#38d3d3">}}




{{<matomeQuote body="彼らの言うことは正しいかもだけど、月面着陸が無意味に高額と思われたように、宇宙技術やGPS、通信衛星が結果的に100倍以上の価値を生んだように、長期的な投資の価値を見極めるべきっていう反論もあるよねって。先見の明について話してるね。" userName="jonplackett" createdAt="2025/08/08 22:06:25" color="#45d325">}}




{{<matomeQuote body="なんであのユニットがそんなに電流食うのか不思議だね。Amazonで最初に見つけた12k BTUの窓用ユニットは115Vで12A使うよって。実際の製品と比較して疑問を投げかけてるね。" userName="Dylan16807" createdAt="2025/08/08 22:07:41" color="">}}




{{<matomeQuote body="NANDフラッシュを推論に必要な高帯域幅リンクで繋ぐのは可能なのかな？各NANDチップには何百ものフラッシュダイが積層されてて、同じデータラインに繋がってるから1つしか同時に話せないのに1GB/s以上出るんだよね。もし並列に繋げたら、チップあたり何百GB/sもの帯域幅が出せるのにって技術的な可能性について考察してるよ。" userName="torginus" createdAt="2025/08/08 21:29:59" color="#785bff">}}




{{<matomeQuote body="今オーブン探してて、多分230V/16Aのやつを買う予定だよ。90℃なら低温調理ができるから、その排熱をまるっと利用できるね。そういう温度だとCO2ヒートポンプが必要だけど、まだ高価。ガスは家にガス管がないからよく分からないって。身近な製品と排熱利用について話してるね。" userName="Tade0" createdAt="2025/08/08 23:50:56" color="">}}




{{<matomeQuote body="誰がそのハードウェアを買うだろうね？データセンターが処分するのは、商業的に採算が取れなくなるから。H100も数年でE-wasteになる可能性が高いって。GeForce 980Tiの中古を2025年に買うようなものだよ。H100レベルの計算が必要なら、もっと安くて電力も少ない新しいハードウェアが出てくるからねって、ハードウェアの陳腐化と経済性について論じてるよ。" userName="potatolicious" createdAt="2025/08/08 21:32:21" color="#ff5733">}}




{{<matomeQuote body="それ多分Amazonのデータ入力ミスだよ。Amazonのスペックは信用できないからメーカーのシートを見た方がいい。12Aは15Aブレーカーで許容される最大負荷で、ユニット自体は900-1000Wくらいじゃないかな。A/Cユニットに専用回路を推奨するためにスペックに12Aって書いてるのかもねって、データ解釈の注意点を指摘してるよ。" userName="quickthrowman" createdAt="2025/08/10 14:00:48" color="#ff5c5c">}}




{{<matomeQuote body="まともな単位だと3.8kW、5.1馬力だね。" userName="Skunkleton" createdAt="2025/08/08 22:41:36" color="">}}




{{<matomeQuote body="2UラックにH100が4枚って、すごそうに聞こえないけど、実は正確なんだ。<br>一般的な1Uや2UサーバーにはH100 PCIe GPUが2～4枚入るよ。<br>42Uラックなら20台の2Uサーバーで40～80枚のH100 PCIe GPUを収容できるってことだね。" userName="neko_ranger" createdAt="2025/08/08 20:05:02" color="#ff5c5c">}}




{{<matomeQuote body="NANDはRAMと比べてめちゃくちゃ遅いから、パフォーマンスが大幅に落ちるよ。<br>もっと重要なのは、推論中にメモリの中身はかなり変化する（固定ウェイトを保存するだけじゃない）ってこと。<br>NANDの摩耗が心配だね。NANDチップの1ビットを何百万回も書き換えたら、大量のNANDチップがおしゃかになるよ。" userName="potatolicious" createdAt="2025/08/08 21:39:43" color="#38d3d3">}}




{{<matomeQuote body="やっと製品ページ見つけたよ: https://bdachelp.zendesk.com/hc/en-us/articles/2319602600002。<br>Amazonページだと1354Wって書いてあったけど、あれは14300BTUモデルのだと思う。<br>12000BTUなら9.72アンペアだね。<br>これって俺の主張をもっと強くするんじゃない？思ったよりも普通の回路に収まるし、ミニスプリットがさらに悪く見えるよ。" userName="Dylan16807" createdAt="2025/08/10 22:33:42" color="#ff33a1">}}




{{<matomeQuote body="そうだね。でもそれは君のシステム効率とは関係ない。<br>君にとってこれはホームサーバーの電力消費とガス消費の話だ。<br>その点では、家の中での抵抗熱はガス炉に比べて100％効率的だよ。ただ燃料費はガス炉の方が安いかもね。" userName="tgma" createdAt="2025/08/09 01:32:02" color="">}}




{{<matomeQuote body="いや、遅くないよ。SSDの単一NANDチップは1GB超の帯域幅があるんだ。<br>チップ内には実際にデータを保持する100以上のウェーハがあるけど、SSDでは読み書き時に一つしかアクティブにならない。<br>全部同時にアクティブにできる特殊なNANDチップを作れば、単一チップから100GB超の帯域幅が得られるはずだね。<br>これはデータストレージには無意味だけど、大量の静的データを素早く読み込む必要がある場合にはすごく役立つよ。" userName="torginus" createdAt="2025/08/08 22:01:08" color="#785bff">}}




{{<matomeQuote body="同じ写真を使って二つのオークションをやってるTemeculaのヤツの話？ヒートシンクが欠けてるやつだよね？<br>面白いけど怪しいな。<br>Tesla時代のハードウェアって、今のワークロードでどれくらい使えるの？<br>例えばDeepSeek R1モデルを4-bit量子化で動かしたら、TTFTとTPSはどんな感じになりそうか、なんか予想できる？" userName="CamperBob2" createdAt="2025/08/08 21:30:03" color="#785bff">}}




{{<matomeQuote body="もしこれが全部無駄でバブルだとしたら、データセンター周りのインフラ整備が長期的にどう影響するのか気になるね。<br>新しい高圧線や変電所がたくさん作られてる。<br>都市もデータセンターの集積地の周りで拡大してるし。<br>新しいラストベルトになりかねない？" userName="bespokedevelopr" createdAt="2025/08/08 22:46:19" color="#38d3d3">}}




{{<matomeQuote body="サーバーはほとんど価値がなくなるだろうけど（あるいはかなり安くなる）、それはずっと前からそうだよね。<br>10年前のサーバーで動かしたい人なんて多くないし（俺は月30ドルで15年くらいのデュアルXeon L5640の専用サーバー使ってるけど）。<br>サーバーもネット機器も交換されるだろうけど、建物やインターネット交換局へのファイバー、電力会社への配線はまだ使えるはずだ。<br>ラックの電力密度が上がって、配電が限界で床面積の多くが使えなくなるデータセンターの話は聞いたことあるけどね。" userName="toast0" createdAt="2025/08/08 22:07:53" color="#ff5733">}}




{{<matomeQuote body="そりゃ、システムボックスの外で行われる非効率なことを無視すれば『同等に効率的』だよね。<br>それって、家の前にある巨大なディーゼル式ラジエーターで家を暖めるようなもんだ。<br>家では電力使わないから無限に効率的、って言ってるのと同じだよ。" userName="mlyle" createdAt="2025/08/09 03:47:52" color="#38d3d3">}}




{{<matomeQuote body="電力消費量について質問してる意味が分からないんだけど？240Vで4.5-5Aって、120Vで9.72Aと同じ電力レベルだよ。" userName="quickthrowman" createdAt="2025/08/11 13:15:51" color="#ff33a1">}}




{{<matomeQuote body="恐ろしい電力需要のせいで誰も買わないって。eBayにSPARCサーバーがいっぱいあるのと同じだよ。" userName="belter" createdAt="2025/08/08 20:16:42" color="">}}

{{</details>}}




{{< details summary="もっとコメントを表示（2）">}}

{{<matomeQuote body="お前は数千ドル、向こうは数百億ドル。ユーザーも1人対7億人。彼らは大規模な効率性で勝ってる。それに、24GBのRAMがあるMacBookなら、GPT-4ローンチ時と同じくらい良いローカルモデルが動かせるんだぜ。詳しい情報はこのURLを見てくれ: https://artificialanalysis.ai/?models=gpt-oss-20b%2Cgemma-3-..." userName="piyh" createdAt="2025/08/08 19:53:13" color="#38d3d3">}}




{{<matomeQuote body="7億人のユニークユーザーを1日や1週間で時間シフトさせれば、ピーク時の同時推論セッションは1000万に抑えられる。個人ユーザーはアイドル時の計算リソースを貯めて一気に使えないから、ピーク時の生成速度を得るにはもっと高価なローカルハードウェアが必要になるんだ。" userName="cornholio" createdAt="2025/08/08 20:39:28" color="#785bff">}}




{{<matomeQuote body="高負荷時に、持ってるハードウェア以上のリクエストをどう処理してるんだ？トークンごとにユーザーA、ユーザーB、ユーザーCって感じでラウンドロビンしてるのか？それとも、全リクエストをFIFOで処理してから次のユーザーに移ってるのか？前者だとオーバーヘッドが大きいけど、全員の応答性を保つためにはいいかもな。" userName="0cf8612b2e1e" createdAt="2025/08/08 21:08:55" color="">}}




{{<matomeQuote body="推論は基本的に、すごく複雑な行列アルゴリズムを繰り返し実行してるんだ。だから、アクティブなセッションを限られたハードウェア上で多重化するのは簡単だよ。一般的なサーバーなら、メインRAMに数十万のアクティブなコンテキストを保持できて、それを必要に応じてGPUにほぼ瞬時に送れるんだ。" userName="cornholio" createdAt="2025/08/08 21:30:40" color="#785bff">}}




{{<matomeQuote body="コンテキストはもっとVRAMを消費すると思ってたんだけど。" userName="apitman" createdAt="2025/08/09 00:30:25" color="">}}




{{<matomeQuote body="アルゴリズム適用後のコンテキストはただのテキストだよ。でも推論中のアクティブなコンテキストは、GPU内で各トークンが12288次元のベクトルに爆発的に展開されるから、VRAMが4桁も多く必要になる。これはモデルの重みと結合されて、ギガバイト単位になるんだ。最終結果はテキストトークンだから、メインシステムRAMで簡単にやり取りして、リモートユーザーに送れるよ。" userName="cornholio" createdAt="2025/08/09 05:37:59" color="#ff5733">}}




{{<matomeQuote body="「ハードウェア以上のリクエストを処理する」なんて無理だよ。ほとんどのユーザーはWebアプリの無料アカウント経由で、モデル選択も「自動」だからね。負荷がピークになったら、リソースをあまり食わないモデルにリクエストを振り向けられるんだ。これは実装がすごく簡単なプロダクトデザインのハックだよ。" userName="computomatic" createdAt="2025/08/09 00:24:38" color="#ff5c5c">}}




{{<matomeQuote body="ChatGPTのウェブページは5〜10%の確率で応答に失敗するんだって。忙しすぎると顧客を無視してるように見えるけど、それでも顧客は戻ってくるし、毎月課金してるから関係ないって感じかな。" userName="addaon" createdAt="2025/08/09 04:49:45" color="">}}




{{<matomeQuote body="上のコメントの話、みんなもよく経験するの？俺は数年ChatGPT使ってるけど、そんな失敗は数回しかないよ。" userName="nocturnes" createdAt="2025/08/09 06:19:19" color="">}}




{{<matomeQuote body="俺は応答失敗はあまり見ないけど、GPT-5リリース直後は8分以上も「思考」してたことあったな。サーバーが混んでたんだろうね。手動でモデル選ぶと、たぶんスロットリングされるか、順番待ちさせられるんだと思うよ。" userName="aniviacat" createdAt="2025/08/09 08:14:42" color="">}}




{{<matomeQuote body="ピーク時には、モデルのトレーニングとか、APIユーザーのバッチジョブみたいなバックグラウンドの作業を停止させられるんだよ。" userName="the8472" createdAt="2025/08/08 21:34:18" color="">}}




{{<matomeQuote body="それ以外にも、レート制限とか、Claudeがよく出す「需要が高いから簡潔モードになった」ってメッセージとかがあるよ。APIユーザーにはバッチ推論を安くしてリアルタイムじゃなくそっちを使わせたり、需要が高い時はサイトがエラーになったりして、ビジネス顧客を優先するんだ。サービス品質が落ちるのは普通で、どのプロバイダーも高い応答性を維持するのに苦労してるね。" userName="vikramkr" createdAt="2025/08/09 15:37:58" color="#785bff">}}




{{<matomeQuote body="最も直接的な答えは、規模が大きくなると推論はバッチ処理できるってことだね。多くのクエリをまとめて並列で処理する方が、個別にGPUを割り当てるより効率的なんだよ。Fin AIのブログ記事「https://fin.ai/research/think-fast-reasoning-at-3ms-a-token/」も参考になるかも。OpenAIとかはさらにすごい独自技術を持ってるだろうけどね。" userName="fergal_reid" createdAt="2025/08/08 20:01:55" color="#ff33a1">}}




{{<matomeQuote body="これが本当の答えだよ。バッチ処理が一番コストを下げられるんだから、他の人たちが何を議論してるのかわからないね。LLM処理のボトルネックはモデルの重みをGPUにロードすることだから、これを複数のリクエストで一緒に計算すれば効率が上がるんだ。ロードは計算より何百倍も遅いから、バッチ処理するとすごく差が出るよ。現実では活性化状態を保存するメモリが足りなくなるのが問題だけど、一度ハードウェアを揃えれば、ほとんど性能を落とさずに何百人も同時に処理できるんだ。" userName="nodja" createdAt="2025/08/09 03:33:37" color="#ff5733">}}




{{<matomeQuote body="親切な返信ありがとう！まだ完全に理解できなかったから、君のコメントをChatGPTに貼って追加で質問したんだけど、俺の理解が正しいか教えてほしいな。GPT-4みたいな大きいモデルはたくさんのGPUに分割されてる（シャーディング）。各GPUには層がVRAMにある。リクエスト処理には層の重みをVRAMからGPUの小さなオンチップキャッシュにロードする必要がある。ロードは遅いけど、計算は速いんだ。バッチ処理なしだと、ロード→ユーザー1計算→再ロード→ユーザー2計算ってなる。バッチ処理なら、一度ロードしたら全ユーザー分計算して次のGPUに送る。これで同時ユーザー数が多いとユーザーあたりのコストが劇的に下がるんだって。でも、大きいバッチは活性化にたくさんのGPUメモリが必要だから最大サイズがあるんだね。これって正確かな？何か重要なことを見落としてたら教えてほしいな。" userName="superasn" createdAt="2025/08/09 04:13:19" color="#ff5733">}}




{{<matomeQuote body="これはちょっと複雑すぎるように見えるな。彼らはそんなにたくさんのモデルを扱ってないし。俺の推測だけど、GPUを特定のモデルに割り当てて、モデルは常にVRAMに置いてるんじゃないかな。だからリクエストごとにロードするなんてことはないはずだよ。ローカル環境と比較して、もし80GBのVRAMを24時間GPUに割り当てて速い応答時間を得ようとしたら、クエリしてない時間のほとんどは無駄になるってことだね。" userName="frabcus" createdAt="2025/08/09 06:00:27" color="#ff5733">}}




{{<matomeQuote body="データロードはVRAMからGPUコアキャッシュにやるんだけど、これが超遅いんだ。GPUはほとんどデータ待ちで暇してるらしいぜ。<br>だから、ここがボトルネックなんだな。" userName="nodja" createdAt="2025/08/09 10:42:54" color="#785bff">}}




{{<matomeQuote body="サンキュー、理解したわ！これについてはもっと詳しい記事が欲しいな。下のコメントみたいに、リクエストごとに専用の状態をロードする必要があるって話も気になるし。" userName="frabcus" createdAt="2025/08/13 08:21:56" color="">}}




{{<matomeQuote body="でもさ、リクエストごとにデータロードするんだろ？LLMだと計算ごとにKVキャッシュが変化するから、結局KVキャッシュ全体をロードするってことじゃね？なんでこれがボトルネックにならないんだよ？Geminiが100万トークンのコンテキストウィンドウって言ってるけど、KVキャッシュどれくらいデカくなるんだよ、まじで？" userName="bawana" createdAt="2025/08/09 14:31:21" color="#45d325">}}




{{<matomeQuote body="OpenAIの秘密兵器の一つは、実は何十億ドルもの損失なんだぜ。2024年には約50億ドルも赤字だったらしい。マジかよって話だよね。<br>https://www.cnbc.com/2024/09/27/openai-sees-5-billion-loss-t..." userName="abathologist" createdAt="2025/08/08 21:22:26" color="#ff5733">}}




{{<matomeQuote body="2024年末から流行ったエージェント型で全部変わったんだよ。前は1リクエストだったけど、今は一つのタスクで何百も処理するからね。OAIやAzureがローカルモデルより優れてる理由は、思考エージェントで並列処理ができること。つまり、複数のステップを同時に処理できるってわけ。" userName="throwmeaway222" createdAt="2025/08/09 05:09:59" color="#45d325">}}




{{<matomeQuote body="バッチ処理のおかげで、推論はめちゃくちゃ儲かるはず。なのに、OpenAIは損失を出してるって言う。でもそれって本当に損失なのかな？資産を買うのは投資じゃん？<br>「赤字運営」って言えば、膨大なデータセットを作って、競争に生き残れるってわけだ。" userName="DoctorOetker" createdAt="2025/08/09 13:08:01" color="#38d3d3">}}




{{<matomeQuote body="でもさ、ユーザーごとにメモリを使ってパーソナライズされてるんだろ？それだと、どれだけバッチ処理できるって言うんだよ？" userName="dbbk" createdAt="2025/08/11 14:48:41" color="">}}




{{<matomeQuote body="大量のGPUを繋げるのを想像してみて。普通にやると、KVキャッシュとかで大量のデータ移動が必要になる。でも、OpenAIはデータを動かさずに、GPUの役割を円形バッファみたいに回転させてるんだ。だから、新しいトークンが来たら、前のラウンドのメモリ担当GPUが新しいアペンドヘッドになる。データを静的に保つのが一番速いってことだね。" userName="DoctorOetker" createdAt="2025/08/12 03:05:43" color="#45d325">}}




{{<matomeQuote body="まさにその通りだね。Microsoftから最大100億ドルの投資があって、それが事前学習、R&D、推論に使われてる。それでもOpenAIは何十億ドルも赤字なんだ。もし利益を気にせず10億ドル以上を使い放題なら、そりゃ大量のモデルを提供できるわけだ。まさにVCスタイルの、成長重視の資本主義で、変わったビジネス構造だよな。" userName="nickpsecurity" createdAt="2025/08/09 03:09:08" color="#45d325">}}

{{</details>}}



[記事一覧へ]({{% ref "/posts/" %}})
